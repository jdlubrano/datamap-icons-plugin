/*! datamaps-icons 2015-10-05 */
"use strict";!function(){var a="icons",b=function(a,b,c){var d="http://www.w3.org/2000/svg",e=this,f={cssClass:"datamap-icon",iconFn:function(){var a=document.createElementNS(d,"circle");return a.setAttribute("r",5),a.setAttribute("stroke","#000"),a.setAttribute("stroke-width",1),a.setAttribute("fill","#000"),a},hover:{overFn:null,overClass:"hover-over",outFn:null,outClass:"hover-out"},click:{allowMultiple:!1,onFn:null,onClass:"click-on",offFn:null,offClass:"click-off"}},g=d3.dispatch("hoverOver","hoverOut","clickOn","clickOff"),h=function(a,b){for(var c in a)"object"==typeof a[c]&&b[c]?h(a[c],b[c]):null==b[c]&&(b[c]=a[c]);return b},i=function(a){return e.latLngToXY(a.lat,a.lng)[0]},j=function(a){return e.latLngToXY(a.lat,a.lng)[1]},k=function(a,b){var c=this.getBBox(),d=i(a)-c.width/2,e=j(a)-c.height/2;return"translate("+d+","+e+")"},l=function(a,b){if(a.icon)return a.icon;if(c.iconFn)return c.iconFn.call(this,a,b);throw new Error("An icon must be specified as DOM element in the data point's icon field or a function that returns icon DOM elements must be provided in options.iconFn.")},m=function(a,b){var c=a.getAttribute("class"),d=d3.select(a);return b&&!d.classed(b)&&(c+=" "+b),c},n=function(a,b){return m(this,a.cssClass)},o=function(a,b){var d=c.hover.overClass;return b.hover&&(d=b.hover.overClass?b.hover.overClass:d),d},p=function(a,b){var d=c.hover.outClass;return b.hover&&(d=b.hover.outClass?b.hover.outClass:d),d},q=function(a,b,c){var d=d3.select(a);d.classed(o(a,b),c),d.classed(p(a,b),!c)},r=function(){return a.selectAll("."+c.cssClass)},s=function(){var a=r();g.on("hoverOver.icon",c.hover.overFn),g.on("hoverOut.icon",c.hover.outFn),a.on("mouseover",function(a,b){q(this,a,!0),g.hoverOver.apply(this,[a,b])}),a.on("mouseout",function(a,b){q(this,a,!1),g.hoverOut.apply(this,[a,b])})},t=function(a){var b=c.click.onClass;return a.click&&(b=a.click.onClass?a.click.onClass:b),b},u=function(a){var b=c.click.offClass;return a.click&&(b=a.click.offClass?a.click.offClass:b),b},v=function(){var a=[];return r().each(function(b,c){var d=t(b);d3.select(this).classed(d)&&a.push(this)}),a},w=function(){return v()[0]},x=function(a){return-1!==v().indexOf(a)},y=function(a,b){var c=d3.select(a),d=c.data()[0],e=t(d),f=u(d);return c.classed(e,b),c.classed(f,!b),c},z=function(a){var b=y(a,!0);g.clickOn.apply(a,b.data())},A=function(a){if(a){var b=y(a,!1);g.clickOff.apply(a,b.data())}},B=function(){var a=r();g.on("clickOn.icon",c.click.onFn),g.on("clickOff.icon",c.click.offFn),a.on("click",function(a,b){var d=x(this);c.click.allowMultiple?d?A(this):z(this):(A(w()),d||z(this))})};c=h(f,c);var C=r().data(b);C.enter().append(l).classed(c.cssClass,!0),C.attr("transform",k).attr("class",n),C.exit().remove(),s(),B()};if(void 0!==Datamap){var c=new Datamap({element:document.createElement("div")});c.addPlugin(a,b)}return b}();